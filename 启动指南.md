# Telegram Media Downloader å¯åŠ¨æŒ‡å—

æœ¬é¡¹ç›®æä¾›äº†å¤šç§å¯åŠ¨æ–¹å¼ï¼Œæ»¡è¶³ä¸åŒç”¨æˆ·çš„éœ€æ±‚ã€‚

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹å¼ä¸€ï¼šäº¤äº’å¼å¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd telegram_media_downloader

# è¿è¡Œäº¤äº’å¼å¯åŠ¨è„šæœ¬
./quick_start.sh
```

ç„¶åæŒ‰ç…§èœå•æç¤ºé€‰æ‹©ç›¸åº”æ“ä½œã€‚

### æ–¹å¼äºŒï¼šå‘½ä»¤è¡Œå¯åŠ¨ï¼ˆæ¨èç†Ÿç»ƒç”¨æˆ·ï¼‰

```bash
# å¯åŠ¨æœåŠ¡
./start.sh start

# åœæ­¢æœåŠ¡
./start.sh stop

# é‡å¯æœåŠ¡
./start.sh restart

# æŸ¥çœ‹çŠ¶æ€
./start.sh status

# æŸ¥çœ‹æ—¥å¿—
./start.sh logs
```

### æ–¹å¼ä¸‰ï¼šDocker å¯åŠ¨ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

```bash
# å¯åŠ¨ Docker æœåŠ¡
./docker_start.sh start

# åœæ­¢ Docker æœåŠ¡
./docker_start.sh stop

# æŸ¥çœ‹ Docker æœåŠ¡çŠ¶æ€
./docker_start.sh status

# æŸ¥çœ‹ Docker æ—¥å¿—
./docker_start.sh logs
```

## ğŸ“‹ å¯åŠ¨è„šæœ¬è¯´æ˜

### 1. äº¤äº’å¼å¯åŠ¨è„šæœ¬ (`quick_start.sh`)

**ç‰¹ç‚¹ï¼š**
- ğŸ¯ æ–°æ‰‹å‹å¥½ï¼Œèœå•å¼æ“ä½œ
- ğŸ¨ å½©è‰²ç•Œé¢ï¼Œè§†è§‰æ•ˆæœä½³
- âš¡ æ”¯æŒå¿«æ·å‘½ä»¤

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# äº¤äº’æ¨¡å¼
./quick_start.sh

# å¿«æ·å‘½ä»¤
./quick_start.sh start    # å¯åŠ¨æœåŠ¡
./quick_start.sh stop     # åœæ­¢æœåŠ¡
./quick_start.sh status   # æŸ¥çœ‹çŠ¶æ€
```

### 2. æ ‡å‡†å¯åŠ¨è„šæœ¬ (`start.sh`)

**ç‰¹ç‚¹ï¼š**
- ğŸ”§ åŠŸèƒ½å®Œæ•´ï¼Œæ”¯æŒæ‰€æœ‰æ“ä½œ
- ğŸ“Š è¯¦ç»†çš„æ—¥å¿—è®°å½•
- ğŸ›¡ï¸ å®‰å…¨æ£€æŸ¥å’Œé”™è¯¯å¤„ç†
- ğŸ–¥ï¸ è·¨å¹³å°æ”¯æŒ

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# åŸºç¡€å‘½ä»¤
./start.sh start          # å¯åŠ¨æœåŠ¡
./start.sh stop           # åœæ­¢æœåŠ¡
./start.sh restart        # é‡å¯æœåŠ¡
./start.sh status         # æŸ¥çœ‹çŠ¶æ€

# æ—¥å¿—ç®¡ç†
./start.sh logs           # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./start.sh logs error     # æŸ¥çœ‹é”™è¯¯æ—¥å¿—
./start.sh clean          # æ¸…ç†æ—¥å¿—

# å¸®åŠ©ä¿¡æ¯
./start.sh help           # æ˜¾ç¤ºå¸®åŠ©
```

### 3. Docker å¯åŠ¨è„šæœ¬ (`docker_start.sh`)

**ç‰¹ç‚¹ï¼š**
- ğŸ³ å®¹å™¨åŒ–éƒ¨ç½²ï¼Œç¯å¢ƒéš”ç¦»
- ğŸ”„ è‡ªåŠ¨é‡å¯ï¼Œé«˜å¯ç”¨æ€§
- ğŸ“¦ ä¸€é”®éƒ¨ç½²ï¼Œæ— éœ€é…ç½®ç¯å¢ƒ
- ğŸ” å¥åº·æ£€æŸ¥ï¼ŒçŠ¶æ€ç›‘æ§

**ä½¿ç”¨æ–¹æ³•ï¼š**
```bash
# åŸºç¡€å‘½ä»¤
./docker_start.sh start           # å¯åŠ¨ Docker æœåŠ¡
./docker_start.sh stop            # åœæ­¢ Docker æœåŠ¡
./docker_start.sh restart         # é‡å¯ Docker æœåŠ¡
./docker_start.sh status          # æŸ¥çœ‹æœåŠ¡çŠ¶æ€

# æ—¥å¿—ç®¡ç†
./docker_start.sh logs            # æŸ¥çœ‹ä¸»æœåŠ¡æ—¥å¿—
./docker_start.sh logs web-ui     # æŸ¥çœ‹ Web æœåŠ¡æ—¥å¿—
./docker_start.sh logs all        # æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—

# å®¹å™¨ç®¡ç†
./docker_start.sh exec            # è¿›å…¥ä¸»æœåŠ¡å®¹å™¨
./docker_start.sh exec web-ui     # è¿›å…¥ Web æœåŠ¡å®¹å™¨
./docker_start.sh rebuild         # é‡å»ºæœåŠ¡
./docker_start.sh clean           # æ¸…ç† Docker èµ„æº
```

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### æœ¬åœ°è¿è¡Œè¦æ±‚
- Python 3.7+
- å·²å®‰è£…é¡¹ç›®ä¾èµ– (`pip install -r requirements.txt`)
- æœ‰æ•ˆçš„ `config.yaml` é…ç½®æ–‡ä»¶

### Docker è¿è¡Œè¦æ±‚
- Docker 20.10+
- Docker Compose 2.0+
- æœ‰æ•ˆçš„ `config.yaml` é…ç½®æ–‡ä»¶

## ğŸ“ æ–‡ä»¶ç»“æ„

```
telegram_media_downloader/
â”œâ”€â”€ start.sh              # æ ‡å‡†å¯åŠ¨è„šæœ¬ (Linux/macOS)
â”œâ”€â”€ start.bat             # æ ‡å‡†å¯åŠ¨è„šæœ¬ (Windows)
â”œâ”€â”€ quick_start.sh        # äº¤äº’å¼å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker_start.sh       # Docker å¯åŠ¨è„šæœ¬
â”œâ”€â”€ docker-compose.yaml   # Docker Compose é…ç½®
â”œâ”€â”€ media_downloader.py   # ä¸»ç¨‹åº
â”œâ”€â”€ config.yaml           # é…ç½®æ–‡ä»¶
â”œâ”€â”€ .pid                  # è¿›ç¨‹IDæ–‡ä»¶ (è‡ªåŠ¨ç”Ÿæˆ)
â””â”€â”€ log/                  # æ—¥å¿—ç›®å½• (è‡ªåŠ¨ç”Ÿæˆ)
    â”œâ”€â”€ service.log       # æœåŠ¡æ—¥å¿—
    â””â”€â”€ error.log         # é”™è¯¯æ—¥å¿—
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯æ¨è

### æ–°æ‰‹ç”¨æˆ·
```bash
# æ¨èä½¿ç”¨äº¤äº’å¼å¯åŠ¨
./quick_start.sh
```

### å¼€å‘è°ƒè¯•
```bash
# æ¨èä½¿ç”¨æ ‡å‡†å¯åŠ¨è„šæœ¬
./start.sh start
./start.sh logs error
```

### ç”Ÿäº§ç¯å¢ƒ
```bash
# æ¨èä½¿ç”¨ Docker å¯åŠ¨
./docker_start.sh start
./docker_start.sh status
```

### Windows ç”¨æˆ·
```cmd
# ä½¿ç”¨ Windows æ‰¹å¤„ç†è„šæœ¬
start.bat start
start.bat status
```

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **æƒé™é—®é¢˜**
   ```bash
   # ç»™è„šæœ¬æ·»åŠ æ‰§è¡Œæƒé™
   chmod +x start.sh quick_start.sh docker_start.sh
   ```

2. **Python ç¯å¢ƒé—®é¢˜**
   ```bash
   # æ£€æŸ¥ Python ç‰ˆæœ¬
   python3 --version
   
   # å®‰è£…ä¾èµ–
   pip install -r requirements.txt
   ```

3. **é…ç½®æ–‡ä»¶é—®é¢˜**
   ```bash
   # æ£€æŸ¥é…ç½®æ–‡ä»¶
   ls -la config.yaml
   
   # æŸ¥çœ‹é…ç½®å†…å®¹
   cat config.yaml
   ```

4. **Docker ç¯å¢ƒé—®é¢˜**
   ```bash
   # æ£€æŸ¥ Docker çŠ¶æ€
   docker --version
   docker-compose --version
   docker info
   ```

### è°ƒè¯•æ¨¡å¼

å¦‚æœéœ€è¦è°ƒè¯•ï¼Œå¯ä»¥ç›´æ¥è¿è¡Œä¸»ç¨‹åºï¼š
```bash
python3 media_downloader.py
```

### æ—¥å¿—æŸ¥çœ‹

```bash
# æŸ¥çœ‹æœåŠ¡æ—¥å¿—
./start.sh logs

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
./start.sh logs error

# å®æ—¶æŸ¥çœ‹æ—¥å¿—
tail -f log/service.log
```

## ğŸš€ é«˜çº§åŠŸèƒ½

### ç³»ç»ŸæœåŠ¡é›†æˆ

åˆ›å»ºç³»ç»ŸæœåŠ¡ï¼ˆLinuxï¼‰ï¼š
```bash
sudo nano /etc/systemd/system/telegram-downloader.service
```

æœåŠ¡é…ç½®ï¼š
```ini
[Unit]
Description=Telegram Media Downloader
After=network.target

[Service]
Type=simple
User=your_username
WorkingDirectory=/path/to/telegram_media_downloader
ExecStart=/path/to/telegram_media_downloader/start.sh start
ExecStop=/path/to/telegram_media_downloader/start.sh stop
Restart=always
RestartSec=10

[Install]
WantedBy=multi-user.target
```

å¯ç”¨æœåŠ¡ï¼š
```bash
sudo systemctl daemon-reload
sudo systemctl enable telegram-downloader
sudo systemctl start telegram-downloader
```

### è‡ªåŠ¨åŒ–è„šæœ¬

å®šæ—¶é‡å¯è„šæœ¬ï¼š
```bash
#!/bin/bash
# æ¯å¤©å‡Œæ™¨2ç‚¹é‡å¯æœåŠ¡
0 2 * * * /path/to/telegram_media_downloader/start.sh restart
```

ç›‘æ§è„šæœ¬ï¼š
```bash
#!/bin/bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€ï¼Œå¦‚æœåœæ­¢åˆ™é‡å¯
if ! ./start.sh status | grep -q "æ­£åœ¨è¿è¡Œ"; then
    echo "$(date): æœåŠ¡å·²åœæ­¢ï¼Œæ­£åœ¨é‡å¯..."
    ./start.sh restart
fi
```

## ğŸ“ è·å–å¸®åŠ©

- æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ï¼š`./start.sh help`
- æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ï¼š`README_æœåŠ¡ç®¡ç†.md`
- æŸ¥çœ‹é¡¹ç›®æ–‡æ¡£ï¼š`README.md`

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v1.0.0
- âœ… æ ‡å‡†å¯åŠ¨è„šæœ¬ (`start.sh`)
- âœ… Windows æ‰¹å¤„ç†è„šæœ¬ (`start.bat`)
- âœ… äº¤äº’å¼å¯åŠ¨è„šæœ¬ (`quick_start.sh`)
- âœ… Docker å¯åŠ¨è„šæœ¬ (`docker_start.sh`)
- âœ… Docker Compose é…ç½®
- âœ… å®Œæ•´çš„æ–‡æ¡£è¯´æ˜

---

**é€‰æ‹©é€‚åˆæ‚¨çš„å¯åŠ¨æ–¹å¼ï¼Œå¼€å§‹ä½¿ç”¨ Telegram Media Downloaderï¼** ğŸ‰ 